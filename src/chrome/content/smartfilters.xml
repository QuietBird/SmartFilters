<?xml version="1.0"?>
<!DOCTYPE bindings SYSTEM "chrome://smartfilters/locale/smartfilters.dtd">

<bindings id="smartFiltersBindings"
          xmlns="http://www.mozilla.org/xbl"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
          xmlns:xbl="http://www.mozilla.org/xbl">
  <binding id="box" extends="chrome://global/content/bindings/richlistbox.xml#richlistbox">
    <content>
    <xul:scrollbox style="overflow:auto;" orient="vertical" flex="1" anonid="main-box">
      <children/>
    </xul:scrollbox>
    </content>
    <implementation>
      <method name="createRow">
        <parameter name="result"/>
        <body><![CDATA[
          var item = document.createElement("richlistitem");

          // set right class
          item.setAttribute("class", "smartfilters-item");
          this.appendChild(item);
          // set view properties
          item.setAttribute("msg", result.text);
          item.setAttribute("folder", result.folder);
          // add all needed icons
          var iconBox = document.getAnonymousElementByAttribute(item, "anonid",
              "smartfilters-iconbox");
          var icons = result.icons;
          for (var i = 0; i < icons.length; i++) {
            var icon = document.createElement('image');
            icon.setAttribute('class', 'smartfilters-row-icon');
            icon.setAttribute('type', icons[i]);
            iconBox.appendChild(icon);
          }
          item.setAttribute("checked", "false");
          // save data
          item.data = result;

          return;
        ]]></body>
      </method>
    </implementation>
  </binding>

  <binding id="item" extends="chrome://global/content/bindings/richlistbox.xml#richlistitem">
    <content>
      <xul:vbox flex="99999">
        <xul:box>
          <xul:box anonid="smartfilters-iconbox">
            <children />
          </xul:box>
          <xul:label xbl:inherits="xbl:text=msg"/>
          <xul:spacer flex="99999" />
<!--          <xul:label xbl:inherits="xbl:text=percent" crop="center"/> -->
        </xul:box>
        <xul:box>
          <xul:label value="&move.to.folder;"/>
          <xul:textbox flex="1" xbl:inherits="value=folder" anonid="smartfilters-folder"/>
          <xul:spacer flex="99999" />
        </xul:box>
      </xul:vbox>
      <xul:checkbox xbl:inherits="checked" anonid="smartfilters-checkbox"/>
    </content>
  </binding>
</bindings>
